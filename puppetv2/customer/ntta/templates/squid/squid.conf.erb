acl manager proto cache_object

acl localhost src 127.0.0.1/32 ::1
acl to_localhost dst 127.0.0.0/8 0.0.0.0/32 ::1

<% allowed_networks.each do |localnet| %>
acl localnet src <%= localnet %>
<% end %>

<% ssl_ports.each do |ssl_port| %>
acl SSL_ports port <%= ssl_port %>
<% end %>

<% safe_ports.each do |safe_port| %>
acl Safe_ports port <%= safe_port %>
<% end %>

acl allowed_sites dstdomain "/etc/squid/allowed.sites.conf"

acl CONNECT method CONNECT

http_access allow manager localhost
http_access deny manager
http_access deny !Safe_ports
http_access deny CONNECT !SSL_ports
http_access allow localnet allowed_sites
http_access allow localhost
http_access deny all

http_port 0.0.0.0:<%= http_port %>

hierarchy_stoplist cgi-bin ?

coredump_dir /var/spool/squid

access_log /var/log/squid/access.log squid